<head>

	<script>
		function getStringBetween(char1, char2, from='') {
			return from.split(char1)[1].split(char2)[0]
		}

		function addImageInputsFields () {
			const imageFieldsContainer = document.querySelector('#image-fields-container')
			let imageFieldsContainerInnerHTML = imageFieldsContainer.innerHTML
			const i = document.querySelectorAll('[id*="image-alt"]').length
			imageFieldsContainerInnerHTML = imageFieldsContainerInnerHTML + `
			       <div id="image-fields-container-${i + 1}">
					<input id="image-alt-${i + 1}" type="text" placeholder="Descrição da imagem">
					<input id="interface-model-image-src-${i + 1}" type="text" placeholder="src da imagem">
				    <button onclick="deleteImageFieldsContainer(${i + 1})" type="button">Deletar</button>
				</div>
			`
			imageFieldsContainer.innerHTML = imageFieldsContainerInnerHTML
		}

		function deleteImageFieldsContainer (imageFieldContainerId) {
			document.querySelector(`#image-fields-container-${imageFieldContainerId}`).remove()
		}

		function addTaskInputsFields (taskType) {
			if (taskType !== 'backend' && taskType !== 'frontend') {
				console.log('addTaskInputsFields(): Escolha um tipo de tarefa válido')
				return
			}
			const tasksFieldsContainer = document.querySelector(`#${taskType}-tasks-fields-container`)
			let tasksFieldsContainerInnerHTML = tasksFieldsContainer.innerHTML
			const i = document.querySelectorAll('[id*="task-description-"]').length
			tasksFieldsContainerInnerHTML = tasksFieldsContainerInnerHTML + `
				<div id="${taskType}-task-fields-container-${i + 1}">
					<input id="task-description-${i + 1}" type="text" placeholder="Descrição da tarefa">
					<input id="task-assignment-${i + 1}" type="text" placeholder="Atribuição">
					<button onclick="deleteTaskFieldsContainer(${i + 1}, '${taskType}')" type="button">Deletar</button>
				</div>
			`
			tasksFieldsContainer.innerHTML = tasksFieldsContainerInnerHTML
		}

		function deleteTaskFieldsContainer (taskFieldContainerId, taskType) {
			document.querySelector(`#${taskType}-task-fields-container-${taskFieldContainerId}`).remove()
		}
	</script>
</head>
<body>
<form action="http://localhost:5000/makeREADME" method="post">
	<div>
	<div>
		<label for="title">
			<h1>Titulo</h1>
		</label>
		<input id="title" type="text" name="title" />
	</div>
	<div>
		<label for="user-story">
			<h1>História do Usuário</h1>
		</label>
		<textarea id="user-story" name="userStory"></textarea>
	</div>
	<div>
		<label>
			<h1>Modelo(s) da Interface</h1>
		</label>
		<button type="button" onclick="addImageInputsFields()">Adicionar Imagem</button>
		<div id="image-fields-container">
			
		</div>
	</div>
	<div>
		<label for="interface-behavior">
			<h1>Comportamento da Interface</h1>
		</label>
		<textarea id="interface-behavior" type="text" name="interfaceBehavior"></textarea>
	</div>
	<div>
		<label for="observations">
			<h1>Observações</h1>
		</label>
		<input id="observations" type="text" name="observations" />
	</div>
	<div>
		<h1>Tarefas</h1>
		<div>
			<label for="frontend-tasks">
				<h2>Frontend</h2>
			</label>
			<button type="button" onclick="addTaskInputsFields('frontend')">Adicionar Tarefa</button>
			<div id="frontend-tasks-fields-container">

			</div>
		</div>
		<div>
			<label for="backend-tasks">
				<h2>Backend</h2>
			</label>
			<button type="button" onclick="addTaskInputsFields('backend')">Adicionar Tarefa</button>
			<div id="backend-tasks-fields-container">

			</div>
		</div>
	</div>
	</div>
	<button type="submit">Gerar README</button>
</form>
</body>
